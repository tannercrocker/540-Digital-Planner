@model Digital_Planner.Models.User

@{
    ViewBag.Title = "Schedule";
    var model_events = Model.Events;
}
<script type="text/javascript">
    function toggle_schedule(showID) {
        if (showID != null) {
            document.getElementById("day").style.display = 'none'
            document.getElementById("week").style.display = 'none'
            document.getElementById("month").style.display = 'none'
            if ("month_button".match(showID)) {
                document.getElementById("month").style.display = 'block'
                document.getElementById("schedule_text").innerHTML = 'Events for @DateTime.Today.ToString("MMMM") @DateTime.Today.Year'
            } else if ("week_button".match(showID)) {
                document.getElementById("week").style.display = 'block'
                document.getElementById("schedule_text").innerHTML = 'Events for the next week'
            } else {
                document.getElementById("day").style.display = 'block'
                document.getElementById("schedule_text").innerHTML = 'Events for today'
            }
        }
    }
</script>

<h2 id="schedule_text">Events for today</h2>
<div class="row">
    <center>
        <button id="day_button" class="btn" onclick="toggle_schedule(this.id)" style="margin-right: 1%;">Today</button>
        <button id="week_button" class="btn" onclick="toggle_schedule(this.id)" style="margin-right: 1%;">Week</button>
        <button id="month_button" class="btn" onclick="toggle_schedule(this.id)" style="margin-right: 1%;">Month</button>
    </center>
</div>

<div id="schedule" class="row" style="margin-top:1%">
    
    @{
        //Add year to where
        var evts = model_events
            .Where(e => e.OccursAt.DayOfYear.Equals(DateTime.Today.DayOfYear) && e.OccursAt.Year.Equals(DateTime.Today.Year))
            .GroupBy(e => e.CategoryID);
    }
    <div id="day" class="table">
        @Html.Partial("_Day", new Tuple<DateTime, ICollection<Digital_Planner.Models.Event>>(DateTime.Today, model_events))
    </div>


    <div id="week" class="table" style="display:none;">
        @Html.Partial("_Week", model_events)
   </div>
   
    <div id="month" class="container" style="display:none;">
        @Html.Partial("_Month", model_events)
    </div>
</div>

<div>
    @Html.Partial("_PreviousPageHyperlink")
</div>